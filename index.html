---
layout: page
---
<div class="wrapper">
    <section>
        <p>
        <div id="table-of-contents">
            <div>On this page:</div>
            <ul>
                <li>
                    <a href="#quick-start">Quick Start</a>
                </li>
                <li>
                    <a href="#cell-class">Using a Custom Tile Class</a>
                </li>
                <li>
                    <a href="#modifying-map">Extending the Generation Process</a>
                </li>
                <li>
                    <a href="#parameters">Controllable Parameters</a>
                </li>
                <li>
                    <a href="#installation">Installation</a>
                </li>

                <li>
                    <a href="#issues">Issues & Collaboration</a>
                </li>
                <li>
                    <a href="#benchmark">Benchmark</a>
                </li>
            </ul>
        
        </div>
            <span id="intro">Karcero is a 2d map generator library written in C# and can be used anywhere. It has a fluent API which lets you write generation code quickly and a more detailed API to let you tweak the parameters to get a map to your liking.
            It also supports constructing a 2d map out of your own cell classes by implementing the ab interface and calling the generator class with your implementation.
                </span>

        </p>
        <h3 id="quick-start">
            Quick Start
        </h3>
        <p>
            Here is an example for a generation call using the fluent API and receiving the result asynchronously:
            <pre><code>var generator = new DungeonGenerator&lt;Cell&gt;();
                generator.GenerateA()
                .MediumDungeon()
                .ABitRandom()
                .SomewhatSparse()
                .WithMediumChanceToRemoveDeadEnds()
                .WithMediumSizeRooms()
                .WithLargeNumberOfRooms()
                .AndTellMeWhenItsDone(map =>
                {
                //Do stuff with map
                });</code></pre>
        And an example for a map generated from that call:
        <img class="example-image" src="images/example1.png" title="Quick start example"/>
        </p>
        <h3 id="cell-class">
            Using a Custom Tile Class
        </h3>
        <p>
            The <span class="code">DungeonGenerator</span> class is a generic class that builds a map of any type that implements the interface <span class="code">ICell</span>. You can
            use the basic <span class="code">Cell</span> implementation supplied with <i>Karcero</i>, inherit the <span class="code">Cell</span> class or implement the <span class="code">ICell</span>
            interface yourself.<br>The <span class="code">ICell</span> interface contains three basic properties, all of which will be filled during the map creation process:
        <ul>
            <li>Row<span class="code">(Int)</span>: specifies the cell\s row in the map matrix.</li>
            <li>Column<span class="code">(Int)</span>: specifies the cell's column in the map matrix.</li>
            <li>Terrain<span class="code">(TerrainType)</span>: specifies the cell's terrain type.</li>
        </ul>

        </p>
        <h3 id="modifying-map">
            Extending the Generation Process
        </h3>
        <p>
            The map is generated by creating a matrix of cells with <span class="code">TerrainType.Wall</span> as their terrain, then running a series of map processors on it.
            If you would like to extend the map generation you can implement the <span class="code">IMapProcessor</span> interface which contains a single <span class="code">ProcessMap</span> method
            and adding it to the <span class="code">DungeonGenerator</span>. <br>
            For example, let's say we want to place treasure as part of the map generation. Here's an implementation of a treasure placing processor:
             <pre><code>public class PlaceTreasureProcessor&lt;T&gt; :
                 IMapProcessor&lt;T&gt; where T : class, ICell, new()
                 {
                 public void ProcessMap(Map&lt;T&gt; map,
                 DungeonConfiguration configuration,
                 IRandomizer randomizer)
                 {
                 //Place treasure
                 }
                 }</code></pre>
        And now just add it before calling generate:
         <pre><code>var generator = new DungeonGenerator&lt;Cell&gt;();
             generator.AddMapProcessor(new PlaceTreasureProcessor&lt;Cell&gt;());
             generator.Generate(configuration);</code></pre>
        </p>
        <h3 id="parameters">
            Controllable Parameters
        </h3>
        <p>
            There are many parameters that influence the map generation process. Following is a brief description of each one:
        <table>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
                <th>Type</th>
                <th>Range</th>
            </tr>
            <tr>
                <td>Height/Width</td>
                <td>The map's size</td>
                <td><span class="code">Int</span> </td>
                <td>Larger than 0</td>
            </tr>
            <tr>
                <td>Randomness</td>
                <td>Controls how many twists and turns the dungeon contains</td>
                <td><span class="code">Double</span> </td>
                <td>0-1</td>
            </tr>
            <tr>
                <td>Sparseness</td>
                <td>Controls how sparse the map is</td>
                <td><span class="code">Double</span> </td>
                <td>0-1</td>
            </tr>
            <tr>
                <td>Chance to remove dead-ends</td>
                <td>Controls how many dead ends will be left in the map</td>
                <td><span class="code">Double</span> </td>
                <td>0-1</td>
            </tr>
            <tr>
                <td>Room width (min/max)</td>
                <td>Room width size</td>
                <td><span class="code">Int</span> </td>
                <td>Larger than 0</td>
            </tr>
            <tr>
                <td>Room height (min/max)</td>
                <td>Room height size</td>
                <td><span class="code">Int</span> </td>
                <td>Larger than 0</td>
            </tr>
            <tr>
                <td>RoomCount</td>
                <td>Controls how many rooms should be generated</td>
                <td><span class="code">Int</span> </td>
                <td>0 or larger</td>
            </tr>
        </table>
        </p>
        <h3 id="installation">
            Installation
        </h3>
        <p>
            There are several ways to use <i>Karcero</i>:
            <ul>
                <li>
                    Nuget package:
                    <pre id="nuget-code"><code>PM> Install-Package Karcero</code></pre>
                </li>
                <li>
                    Download the code and add the <span class="code">Karcero.Engine</span> project to your solution:
                    <a href="https://github.com/odedw/karcero/tarball/master">TAR</a> / <a href="https://github.com/odedw/karcero/zipball/master">ZIP</a>
                </li>
                <li>
                    Download the assembly and add a reference to it:
                    <a href="content/Karcero.zip">Assembly</a>
                </li>
            </ul>
            <i>Karcero</i> has no external dependencies.
        </p>
        <h3 id="issues">
            Issues & Collaboration
        </h3>
        <p>
            If you encounter any issues please post them to <a href="https://github.com/odedw/karcero/issues">repository</a>. If you would like to contribute or collaborate contact me
            <a href="mailto:oded.welgreen+karcero@gmail.com">here.</a>
        </p>
         <h3 id="benchmark">
            Benchmark
        </h3>
        <p>
            <ul>
                <li>Results are in milliseconds.</li>
                <li>Each configuration in the following tables was used to generate 10 maps, and the average value is stated.</li>
                <li>Not all configurations are possible. When there is no room to add the number of rooms requested the value is '-'.</li>
                <li>The map sizes used are:
                    <ul>
                        <li>Huge -   100 x 100</li>
                        <li>Large -  45 x 45</li>
                        <li>Medium - 33 x 33</li>
                    </ul>
                </li>
                <li>The room sizes used are:
                    <ul>
                        <li>Large - (5-8 x 5-8)</li>
                        <li>Medium -(3-6 x 3-6)</li>
                        <li>Small - (2-3 x 2-3)</li>
                    </ul>
                </li>
                <li>The maps were generated with the following values:
                    <ul>
                        <li>Randomness - 0.6</li>
                        <li>Sparseness - 0.6</li>
                        <li>Chance to remove dead ends - 0.5</li>
                    </ul>
                </li>
                <li>The benchmark was run on an i7-3770 CPU @ 3.40GHz (8CPUs) with 16GB ram.
            </ul>
            <table>
<tr>
<th>Huge Map</th>
<th>10 Rooms</th>
<th>15 Rooms</th>
<th>20 Rooms</th>
<th>25 Rooms</th>
<th>30 Rooms</th>
<th>35 Rooms</th>
<th>40 Rooms</th>
</tr>
<tr>
<td>Small Rooms</td>
<td>112</td>
<td>133</td>
<td>121</td>
<td>131</td>
<td>127</td>
<td>145</td>
<td>148</td>
</tr>
<tr>
<td>Medium Rooms</td>
<td>109</td>
<td>112</td>
<td>119</td>
<td>129</td>
<td>142</td>
<td>144</td>
<td>148</td>
</tr>
<tr>
<td>Large Rooms</td>
<td>118</td>
<td>127</td>
<td>114</td>
<td>123</td>
<td>142</td>
<td>141</td>
<td>149</td>
</tr>
</table>
<table>
<tr>
<th>Large Map</th>
<th>10 Rooms</th>
<th>15 Rooms</th>
<th>20 Rooms</th>
<th>25 Rooms</th>
<th>30 Rooms</th>
<th>35 Rooms</th>
<th>40 Rooms</th>
</tr>
<tr>
<td>Small Rooms</td>
<td>14</td>
<td>15</td>
<td>17</td>
<td>18</td>
<td>19</td>
<td>20</td>
<td>22</td>
</tr>
<tr>
<td>Medium Rooms</td>
<td>14</td>
<td>16</td>
<td>20</td>
<td>22</td>
<td>29</td>
<td>35</td>
<td>-</td>
</tr>
<tr>
<td>Large Rooms</td>
<td>16</td>
<td>19</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
</table>
<table>
<tr>
<th>Medium Map</th>
<th>10 Rooms</th>
<th>15 Rooms</th>
<th>20 Rooms</th>
<th>25 Rooms</th>
<th>30 Rooms</th>
<th>35 Rooms</th>
<th>40 Rooms</th>
</tr>
<tr>
<td>Small Rooms</td>
<td>7</td>
<td>8</td>
<td>8</td>
<td>10</td>
<td>11</td>
<td>12</td>
<td>16</td>
</tr>
<tr>
<td>Medium Rooms</td>
<td>8</td>
<td>11</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>Large Rooms</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
</table>


        </p>
    </section>
</div>

<!--[if !IE]><script>fixScale(document);</script><![endif]-->
